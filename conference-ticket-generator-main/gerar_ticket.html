<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="gerar_ticket.css">
    <title>Conding Conf</title>
</head>
<body>

    <div class="background-patterns">
        <img src="assets/images/pattern-squiggly-line-bottom-desktop.svg" alt="" class="pattern-bottom">
        <img src="assets/images/pattern-squiggly-line-top.svg" alt="" class="pattern-top">
    </div>
    
    <header class="header">    
        <div class="header__logo">
            <img src="assets/images/logo-full.svg" alt="logo-full">
        </div>
    </header>

    <main class="main">
        <div class="main__title">
            <h1 class="main__heading">Congrats, {} Your ticket is ready</h1>
            <p class="main__subtitle">We've emailed your ticket to {} and will send updates in the run up to the event</p>
        </div>
        
       <div class="main__ticket">
            <img src="assets/images/pattern-ticket.svg" alt="" class="ticket__image">
  
            <div class="ticket__content">
                <h2 id="full_name">Jonatan Kristof</h2>
                <p id="email_address">@jonatankristof0101</p>
                <p id="github_username">Jan 31, 2025 / Austin, TX</p>
            </div>
        </div>
    </main>

    <script>
        // obtendo os dados do objeto que eu tinha criado lá no script.js
        const dados = JSON.parse(localStorage.getItem("usuario_ticket"))

        if (dados){
            // define os textos com os dados do usuário
            document.querySelector(".main__heading").innerHTML = `Congrats, ${dados.nome} Your ticket is ready`

            document.querySelector(".main__subtitle").innerHTML = `We've emailed your ticket to <strong>${dados.email}</strong> and will send updates in the run up to the event`
            
            // define o nome, email e github no ticket__content
            document.getElementById("full_name").textContent = dados.nome
            
            document.getElementById("email_address").textContent = dados.email

            document.getElementById("github_username").textContent = dados.github
            
            // adiciona a imagem de avatar
            const img = document.createElement("img")
            img.src = dados.avatarBase64
            img.alt = "Avatar do usuário"
            img.classList.add("ticket")


            // Insere o avatar no início do conteúdo do ticket
            document.querySelector(".ticket__content").prepend(img)
        }else{
            // Caso não haja dados, mostra uma mensagem de erro
            document.getElementById("main__title").innerHTML = `
               <h1>nenhum ticket encontrado</h1>
            `
             document.querySelector(".main__ticket").style.display = "none";

        }
        
      
    </script>
</body>
</html>